// Generated by CoffeeScript 1.8.0
var reg, rules;

reg = /\[.*?\]/g;

rules = {
  second: /s{1,2}/,
  minute: /m{1,2}/,
  hour: /(h{1,2}|a)/i,
  day: /d{1,4}/i,
  month: /M{1,4}/,
  year: /(YY|YYYY)/
};

module.exports = function(pattern) {
  var clean, ms, n, name, rule, type;
  clean = pattern.replace(reg, '');
  for (name in rules) {
    rule = rules[name];
    if (rule.test(clean)) {
      type = name;
      break;
    }
  }
  n = new Date;
  switch (type) {
    case 'second':
      ms = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes(), n.getSeconds() + 1) - n;
      break;
    case 'minute':
      ms = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes() + 1) - n;
      break;
    case 'hour':
      ms = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours() + 1) - n;
      break;
    case 'day':
      ms = new Date(n.getFullYear(), n.getMonth(), n.getDate() + 1) - n;
      break;
    case 'month':
      ms = new Date(n.getFullYear(), n.getMonth() + 1, 1) - n;
      break;
    case 'year':
      ms = new Date(n.getFullYear() + 1, 0, 1) - n;
      break;
    default:
      ms = null;
  }
  return [ms, type];
};
